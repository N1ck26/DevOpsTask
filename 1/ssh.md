### 1.1 Создание SSH-ключей и проверка их работоспособности

1. **Создание SSH-ключа**:
   - Откройте терминал и выполните команду для создания SSH-ключа:
     ```bash
     ssh-keygen -t rsa -b 4096 -C "your_email@example.com"
     ```
     - `-t rsa` указывает тип ключа (RSA).
     - `-b 4096` задает длину ключа в битах.
     - `-C "your_email@example.com"` добавляет комментарий к ключу (обычно используется email).

   - Вам будет предложено указать место для сохранения ключа (по умолчанию `~/.ssh/id_rsa`). Нажмите Enter, чтобы использовать значение по умолчанию.
   - Затем будет предложено ввести парольную фразу (passphrase). Это необязательно, но рекомендуется для повышения безопасности.

2. **Проверка работоспособности ключа**:
   - Скопируйте публичный ключ на удаленный сервер:
     ```bash
     ssh-copy-id user@remote_host
     ```
     - Замените `user` на ваше имя пользователя на удаленном сервере, а `remote_host` на IP-адрес или доменное имя сервера.

   - Попробуйте подключиться к серверу:
     ```bash
     ssh user@remote_host
     ```
     - Если все настроено правильно, вы должны подключиться без ввода пароля.

### 1.2 Настройка параметров SSH-сервера в `/etc/ssh/`

1. **Откройте конфигурационный файл SSH-сервера**:
   - Обычно это файл `/etc/ssh/sshd_config`. Откройте его в текстовом редакторе с правами суперпользователя:
     ```bash
     sudo nano /etc/ssh/sshd_config
     ```

2. **Настройте параметры**:
   - Вот несколько параметров, которые можно настроить:
     - `Port 22` — измените порт SSH (например, на 2222) для повышения безопасности.
     - `PermitRootLogin no` — отключите вход под пользователем root.
     - `AllowUsers user1 user2` — разрешите вход только определенным пользователям.
     - `MaxAuthTries 3` — ограничьте количество попыток ввода пароля.
     - `ClientAliveInterval 300` и `ClientAliveCountMax 2` — настройте отключение неактивных сессий.

3. **Сохраните изменения и перезапустите SSH-сервер**:
   - После внесения изменений сохраните файл и перезапустите SSH-сервер:
     ```bash
     sudo systemctl restart sshd
     ```

### 1.3 Отключение аутентификации по паролю и оставление входа только по ключам

1. **Откройте конфигурационный файл SSH-сервера**:
   - Снова откройте файл `/etc/ssh/sshd_config`:
     ```bash
     sudo nano /etc/ssh/sshd_config
     ```

2. **Найдите и измените следующие параметры**:
   - Найдите строку `PasswordAuthentication` и измените ее значение на `no`:
     ```bash
     PasswordAuthentication no
     ```
   - Убедитесь, что аутентификация по ключам включена:
     ```bash
     PubkeyAuthentication yes
     ```

3. **Сохраните изменения и перезапустите SSH-сервер**:
   - Сохраните файл и перезапустите SSH-сервер:
     ```bash
     sudo systemctl restart sshd
     ```

4. **Проверка**:
   - Попробуйте подключиться к серверу с другого устройства, используя только SSH-ключ. Если все настроено правильно, вход по паролю будет невозможен.

Теперь ваш SSH-сервер настроен на использование только ключей для аутентификации, что повышает его безопасность.